<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Lo Siento</title>
	<!-- Latest compiled and minified CSS & JS -->
	<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="css/main.css" media="screen" title="no title">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
	<!-- Firebase Link -->
    <script src="https://www.gstatic.com/firebasejs/3.1.0/firebase.js"></script>
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<body>
	<!-- Chat Slide Out -->
	<span style="font-size:30px;cursor:pointer;color:white;" onclick="openNav()">&#9776; chat</span>
	<div id="mySidenav" class="sidenav">
		<a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
		<!-- Chat -->
    	 <div id="chatBox">
			<form>
				<div class="row">
					<div class="large-12 columns">
					    <div id='messagesDiv' class="msg-wrapper"></div>
					    <br>
					</div>
				</div>
				
				<div class="textboxes">
					<div class="row">
						<div class="large-12 columns">
						    <span class="error"></span>
						    <label>
							<br>
							<input type="text" id='nameInput' placeholder='Name' />
							</label>
						</div>
					</div>
					
					<div class="row">
						<div class="large-12 columns">
						    <label>
							<br>
							<textarea id='messageInput' placeholder='Message'></textarea>
							<input type="submit" value="Submit" id="submit">
							</label>
						</div>
					</div>
				</div>
				
			</form>
		</div>
	</div>

<nav class="navbar navbar-toggleable-md navbar-light bg-faded">
  <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="#">Navbar</a>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Link</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#">Disabled</a>
      </li>
    </ul>
    <form class="form-inline my-2 my-lg-0">
      <input class="form-control mr-sm-2" type="text" placeholder="Search">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
    </form>
  </div>
</nav>

<div class="container">

    <div class="jumbotron" style="background-color: #336699; color: white;">
      <h1 class="text-center">
        <strong>
          <div class="glyphicon glyphicon-book"></div>
          Faux Article Search
          <div class="glyphicon glyphicon-book"></div>
        </strong>
      </h1>
    </div>

    <div class="row" id="searchParameters">
      <div class="col-sm-12">
        <br>
        <div class="panel panel-primary">

          <div class="panel-heading">
            <h3 class="panel-title">
              <strong>
                <div class="glyphicon glyphicon-search"></div>
                Search Parameters
              </strong>
            </h3>
          </div>

          <div class="panel-body">

            <form role="form">

              <div class="form-group">
                <label for="search">Search Term</label>
                <input type="text" class="form-control" id="searchTerm">
              </div>

              <button type="submit" class="btn btn-default" id="submitButton">
                <div class="glyphicon glyphicon-search"></div>
                Submit
              </button>

              <button type="clear" class="btn btn-default" id="clearButton">
                <div class="glyphicon glyphicon-trash"></div>
                Clear Results
              </button>

            </form>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12 col-md-12 col-xs-12 col-lg-12" id="topArticles">
        <br>

        <div class="panel panel-primary">

          <div class="panel-heading">
            <h3 class="panel-title">
              <strong>
              <div class="glyphicon glyphicon-th-list"></div>
              Top Articles
              </strong>
            </h3>
          </div>

          <div class="panel-body" id="div-section">
          </div>
        </div>
      </div>
    </div>

	<script>
		// Initialize Firebase
		var config = {
			apiKey: "AIzaSyA7uWeljdVkI-dTT5T48pxGqYX0d5FxkLY",
			authDomain: "project-28f23.firebaseapp.com",
			databaseURL: "https://project-28f23.firebaseio.com",
			projectId: "project-28f23",
			storageBucket: "project-28f23.appspot.com",
			messagingSenderId: "294037184898"
		};

		firebase.initializeApp(config);

		var database = firebase.database();

		// CHAT LISTENERS
	    $("#submit").on("click", function(event) {
			event.preventDefault();
			var name = $('#nameInput').val().trim();
			var text = $('#messageInput').val().trim();
			if (name == "" || text == "") {
				$(".error").text("All fields required.")
			}
			else {
				database.ref().push({name: name, text: text});
				$('#messageInput').val('');
				$(".error").text("")
			}
	    });
	    database.ref().on('child_added', function(snapshot) {
			var message = snapshot.val();
			displayChatMessage(message.name, message.text);
	    });
	    
	    function displayChatMessage(name, text) {
			$('<div/>').text(text).prepend($('<em/>').text(name+': ')).appendTo($('#messagesDiv'));
			$('#messagesDiv')[0].scrollTop = $('#messagesDiv')[0].scrollHeight;
	    };

		//=============================================================
		//Navigation
		function openNav() {
		    document.getElementById("mySidenav").style.width = "300px";
		}

		function closeNav() {
		    document.getElementById("mySidenav").style.width = "0";
		}
	</script>
  <script src="js/game.js" type="text/javascript"></script>

</body>
</html>